SELECT p.product_id, (SELECT AVG(rating) AS total FROM oc_review r1 WHERE r1.product_id = p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating, (SELECT price FROM oc_product_special ps WHERE ps.product_id = p.product_id ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special FROM oc_product_to_category p2c LEFT JOIN oc_product p ON (p2c.product_id = p.product_id) LEFT JOIN oc_product_description pd ON (p.product_id = pd.product_id) LEFT JOIN oc_product_special ps ON (p.product_id = ps.product_id) WHERE pd.name not like '%custom%' AND pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2c.category_id = '90' GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC